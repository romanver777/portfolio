"use strict";!function(){var e,o,r=document.querySelector("body"),t=document.querySelector(".preloader"),i=document.querySelector(".preloader-bg"),s=document.querySelector(".container-index"),n=["./assets/img/content/forest_prel_bg.jpg"],c=["./assets/js/foundation.js"],a=["./assets/img/content/bg_forest_1800.jpg","./assets/img/content/water-maps.jpg"],u=0,l=0,d=!m()&&1200<=window.innerWidth?[].concat(n,c,a).length:n.length+1;function m(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"ontouchstart"in document.documentElement}function f(e){var t=document.querySelector(".progress__number"),n=100*e/d,e=Math.round(10/d);o&&clearInterval(o),o=setInterval(function(){n<=(u+=1)&&(clearInterval(o),u=n),t.innerHTML=u},e)}function _(){setTimeout(function(){s.classList.add("container-index_visible"),t.classList.add("preloader_hided")},1e3)}n=n,(e=new Image).src=n[0],e.onload=function(){var e,t,n;f(++l),i.classList.add("preloader-bg_visible"),!m()&&1200<=window.innerWidth?Promise.all(c.map(function(e){return n=e,new Promise(function(e){var t=document.createElement("script");t.src=n,document.head.append(t),t.onload=function(){f(++l),e()}});var n})).then(function(){return Promise.all(a.map(function(e){return n=e,new Promise(function(e){var t=new Image;t.src=n,t.onload=function(){f(++l),e()}});var n}))}).then(function(){l===d&&(s.classList.remove("bg-forest-index"),_())}):(e=document.querySelector(".bg-forest-index"),t='url("',t=(e=window.getComputedStyle(e).backgroundImage).indexOf(t)+t.length,(n=r).style.height=window.innerHeight+"px",n.style.position="fixed",(n=new Image).src=e.slice(t,-'")'.length),n.onload=function(){f(++l),_()})}}(),function(){var t=document.querySelector(".auth-wrap"),e=document.querySelector(".auth__link"),n=document.querySelector(".front"),o=document.querySelector(".back"),r=document.querySelector(".butt__link_home");e.addEventListener("click",function(){n.classList.add("front_flipped"),o.classList.add("back_flipped"),t.classList.add("auth-wrap_display-none")}),r.addEventListener("click",function(e){e.preventDefault(),n.classList.remove("front_flipped"),o.classList.remove("back_flipped"),t.classList.remove("auth-wrap_display-none")})}(),function(){var t,e=document.querySelector(".butt__link_login"),a=document.querySelector(".form__name"),u=document.querySelector(".form__pass"),l=document.querySelector(".checkbox__input"),d=document.querySelector(".radio-btn__input_yes"),m=document.querySelector(".messageBox"),f=document.querySelector(".messageBox__text"),_=document.querySelector(".form-auth");e.addEventListener("click",function(e){var n,o,r,i,s,c;e.preventDefault(),Promise.all([(e=a.value,s=/^\S+@\S+\.\S+$/,c=e.trim(),new Promise(function(e,t){return s.test(c)?e(c):t("Введите правильный адрес почты")})),(e=u.value,r=[4,15],i=e.trim(),new Promise(function(e,t){return i.length>r[0]&&i.length<=r[1]?e(i):t("Введите пароль длиной от 4 до 15 символов")})),(o=l,new Promise(function(e,t){return o.checked?e():t("Роботам вход воспрещен")})),(n=d,new Promise(function(e,t){return n.checked?e():t("Роботам вход воспрещен")}))]).then(function(){clearTimeout(t),m.classList.remove("messageBox_visible"),setTimeout(function(){f.innerHTML="Форма отправлена",m.classList.add("messageBox_visible"),_.reset()},800),setTimeout(function(){m.classList.remove("messageBox_visible")},3e3)}).catch(function(e){t?(clearTimeout(t),m.classList.remove("messageBox_visible"),setTimeout(function(){f.innerHTML=e,m.classList.add("messageBox_visible")},800)):(f.innerHTML=e,m.classList.add("messageBox_visible")),t=setTimeout(function(){m.classList.remove("messageBox_visible"),t=null},3e3)})})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiaW1hZ2UiLCJpbnRJZCIsImJvZHkiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwcmVMb2FkZXIiLCJwcmVMb2FkZXJCZyIsImxvYWRlclVybCIsInNjcmlwdFVybCIsInBhZ2VJbWdVcmxzIiwicHJvZ3Jlc3MiLCJjaGVja0xvYWRpbmdCZ1ByZWxvYWRlciIsImxvYWRlZCIsImlzTW9iaWxlIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImFuaW1hdGVQcm9ncmVzcyIsImxlbmd0aCIsImNsYXNzTGlzdCIsImVsZW0iLCJ0ZXN0IiwidXNlckFnZW50IiwiZG9jdW1lbnRFbGVtZW50IiwiY291bnQiLCJzaG93UGFnZSIsInNldFRpbWVvdXQiLCJtYXhMb2FkZWQiLCJ0aW1lIiwiTWF0aCIsInJvdW5kIiwiY2xlYXJJbnRlcnZhbCIsImF1dGhXcmFwIiwibmV3TnVtYmVyIiwiYXV0aExpbmsiLCJiYWNrIiwiaG9tZUxpbmsiLCJmcm9udCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwicHJldmVudERlZmF1bHQiLCJyZW1vdmUiLCJhZGQiLCJ1cmwiLCJzY3JpcHQiLCJsb2FkU2NyaXB0Iiwic3JjIiwib25sb2FkIiwiUHJvbWlzZSIsImNvbnRhaW5lckluZGV4IiwibWFwIiwicmVzIiwiY3JlYXRlRWxlbWVudCIsImhlYWQiLCJhcHBlbmQiLCJ0aGVuIiwiYWxsIiwiSW1hZ2UiLCJpbWciLCJmaXJzdEl0ZW0iLCJzZXRNb2JpbGVGdWxsSGVpZ2h0IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImJnIiwiYmFja2dyb3VuZEltYWdlIiwic3R5bGUiLCJoZWlnaHQiLCJpbm5lckhlaWdodCIsImxvYWRJbWciLCJiZ1N0eWxlIiwic2xpY2UiLCJpbmRleCIsImxvZ2luTGluayIsImZvcm1OYW1lIiwiZm9ybVBhc3MiLCJjaGVja2JveCIsInJhZGlvIiwibWVzc2FnZUJveFRleHQiLCJ0aW1lb3V0SWQiLCJ2YWxpZGF0ZUVtYWlsIiwiY2xlYXJUaW1lb3V0IiwibWVzc2FnZUJveCIsImlubmVySFRNTCIsImVycm9yIiwiZm9ybSIsImJ0biIsImJveCIsImxpbWl0cyIsInBhc3NUcmltIiwicmVnIiwibWFpbFRyaW0iLCJtYWlsIiwidmFsdWUiLCJ0cmltIiwicmVqIiwicGFzcyIsImNoZWNrZWQiLCJyZXNldCIsInZhbGlkYXRlUGFzcyIsInZhbGlkYXRlUmFkaW8iLCJ2YWxpZGF0ZUNoZWNrYm94Il0sIm1hcHBpbmdzIjoiQUFBQSxhQUNBLENBQUEsV0FDQyxJQXNCT0EsRUE4RkhDLEVBcEhKQyxFQUFZQyxTQUFBQyxjQUFBLE1BQUEsRUFDTEYsRUFBT0MsU0FBU0MsY0FBcUIsWUFBQSxFQUNyQ0MsRUFBWUYsU0FBU0MsY0FBYyxlQUFhLEVBQ2hERSxFQUFjSCxTQUFTQyxjQUFjLGtCQUFnQixFQUdyREcsRUFBYSxDQUFBLDJDQUNiQyxFQUFhLENBQUEsNkJBQ2JDLEVBQ0osQ0FJRiwwQ0FDQSx1Q0FPQUMsRUFBU0MsRUFDUEMsRUFBUyxFQUVUWixFQVBBLENBQUNhLEVBUU8sR0FBRSxNQUFBQyxPQUFBQyxXQUNSQyxHQUFBQSxPQUFBQSxFQUFnQkosRUFBT0gsQ0FBQSxFQUFBUSxPQUN2QlgsRUFBWVksT0FKQyxFQXFDakIsU0FlUUMsSUFkTixNQWdCRWhCLGlFQUEwQmlCLEtBQzFCRCxVQUFXRSxTQUFHLEdBQ1pULGlCQUFRVCxTQUFBbUIsZUFiZCxDQW1EQSxTQUFBTixFQUFBTyxHQUVBLElBQUFKLEVBQVNLLFNBQVdwQixjQUFBLG1CQUFBLEVBQ2xCcUIsRUFBVyxJQUFNRixFQUFBRyxFQUdkQyxFQUFLQyxLQUFBQyxNQUZTWCxHQUVUUSxDQUFBLEVBRVJ6QixHQUNKNkIsY0FBQTdCLENBQUEsRUFFRUEsRUFBTThCLFlBQVc1QixXQUVLNkIsSUFEaEJDLEdBUFFmLEtBU1JnQixjQUFnQjlCLENBQUFBLEVBQ2hCK0IsRUFBV2hDLEdBR2ZpQyxFQUFNbEIsVUFBYVIsQ0FDbkJ3QixFQUFBQSxDQUFLaEIsQ0FuQlAsQ0FzQkFpQixT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Q0FBQyxHQWxDRSxFQUNIdEMsS0FBQSxXQUVGd0IsYUFBU0QsQ0FBa0IsRUFDbkJVLEVBQU1yRSxVQUFBc0IsT0FBZ0Isb0JBQUEsRUFDeEJnRCxXQUFXQyxXQUVmZCxFQUFtQkssVUFBSSxtQkFDckJELEVBQWU3RCxVQUFVdUIsSUFDckJTLG9CQUNJLEVBQ1JnQyxFQUFBYSxNQUFBLENBQ0osRUFBQSxHQUFBLEVBRUF0RSxXQUFTdUUsV0FDRFgsRUFBYW5FLFVBQUdzQixPQUFBLG9CQUFBLENBQ2xCOEMsRUFBQUEsR0FBQUEsQ0FFSixDQUFBLEVBQUEsTUFDU0EsU0FBQUEsR0FHUFYsR0FLQUUsYUFBV2dCLENBQWUsRUFDMUJmLEVBQUE3RCxVQUFBc0IsT0FBQSxvQkFBQSxFQUNKZixXQUFBLFdBRVN3RSxFQUFjZCxVQUFLRixFQUNuQkYsRUFBWTdELFVBQUNnQyxJQUFHLG9CQUFVLENBQy9CLEVBQU9pQyxHQUFHLElBVmRSLEVBQUFLLFVBQUFDLEVBRUFGLEVBQVNtQixVQUFvQnpELElBQUUsb0JBQUEsR0FXN0JtQyxFQUFBbkQsV0FBQSxXQXZDTXNELEVBQVc3RCxVQUFVc0IsT0FBTyxvQkFBb0IsRUFDaERvQyxFQUFZLElBQ2QsRUFBRyxHQUFJLENBQ1QsQ0FBQyxDQUNMLENBQUMsQ0FtQ0YsRUFBQSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG4vLyBwcmVsb2FkZXJcclxuKGZ1bmN0aW9uICgpIHtcclxuICBjb25zdCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xyXG4gIGNvbnN0IHByZUxvYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmVsb2FkZXInKTtcclxuICBjb25zdCBwcmVMb2FkZXJCZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmVsb2FkZXItYmcnKTtcclxuICBjb25zdCBjb250YWluZXJJbmRleCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWluZXItaW5kZXgnKTtcclxuXHJcbiAgY29uc3QgbG9hZGVyVXJsID0gWycuL2Fzc2V0cy9pbWcvY29udGVudC9mb3Jlc3RfcHJlbF9iZy5qcGcnXTtcclxuICBjb25zdCBzY3JpcHRVcmwgPSBbJy4vYXNzZXRzL2pzL2ZvdW5kYXRpb24uanMnXTtcclxuICBjb25zdCBwYWdlSW1nVXJscyA9IFtcclxuICAgICcuL2Fzc2V0cy9pbWcvY29udGVudC9iZ19mb3Jlc3RfMTgwMC5qcGcnLFxyXG4gICAgJy4vYXNzZXRzL2ltZy9jb250ZW50L3dhdGVyLW1hcHMuanBnJyxcclxuICBdO1xyXG5cclxuICBsZXQgcHJvZ3Jlc3MgPSAwO1xyXG4gIGxldCBsb2FkZWQgPSAwO1xyXG4gIGxldCBpbWdGcm9tQ3NzID0gMTtcclxuICBsZXQgbWF4TG9hZGVkID1cclxuICAgICFpc01vYmlsZSgpICYmIHdpbmRvdy5pbm5lcldpZHRoID49IDEyMDBcclxuICAgICAgPyBbLi4ubG9hZGVyVXJsLCAuLi5zY3JpcHRVcmwsIC4uLnBhZ2VJbWdVcmxzXS5sZW5ndGhcclxuICAgICAgOiBsb2FkZXJVcmwubGVuZ3RoICsgaW1nRnJvbUNzcztcclxuXHJcbiAgZnVuY3Rpb24gY2hlY2tMb2FkaW5nQmdQcmVsb2FkZXIodXJsKSB7XHJcbiAgICBsZXQgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICAgIGltYWdlLnNyYyA9IHVybFswXTtcclxuICAgIGltYWdlLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgbG9hZGVkKys7XHJcbiAgICAgIGFuaW1hdGVQcm9ncmVzcyhsb2FkZWQpO1xyXG4gICAgICBwcmVMb2FkZXJCZy5jbGFzc0xpc3QuYWRkKCdwcmVsb2FkZXItYmdfdmlzaWJsZScpO1xyXG5cclxuICAgICAgaWYgKCFpc01vYmlsZSgpICYmIHdpbmRvdy5pbm5lcldpZHRoID49IDEyMDApIHtcclxuICAgICAgICBQcm9taXNlLmFsbChzY3JpcHRVcmwubWFwKCh1cmwpID0+IGxvYWRTY3JpcHQodXJsKSkpXHJcbiAgICAgICAgICAudGhlbigoKSA9PiBQcm9taXNlLmFsbChwYWdlSW1nVXJscy5tYXAoKHVybCkgPT4gbG9hZEltZyh1cmwpKSkpXHJcbiAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChsb2FkZWQgPT09IG1heExvYWRlZCkge1xyXG4gICAgICAgICAgICAgIGNvbnRhaW5lckluZGV4LmNsYXNzTGlzdC5yZW1vdmUoJ2JnLWZvcmVzdC1pbmRleCcpO1xyXG4gICAgICAgICAgICAgIHNob3dQYWdlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxldCBiZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iZy1mb3Jlc3QtaW5kZXgnKTtcclxuICAgICAgICBjb25zdCBmaXJzdEl0ZW0gPSAndXJsKFwiJztcclxuICAgICAgICBjb25zdCBsYXN0SXRlbSA9ICdcIiknO1xyXG5cclxuICAgICAgICBsZXQgYmdTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGJnKS5iYWNrZ3JvdW5kSW1hZ2U7XHJcbiAgICAgICAgbGV0IGluZGV4ID0gYmdTdHlsZS5pbmRleE9mKGZpcnN0SXRlbSkgKyBmaXJzdEl0ZW0ubGVuZ3RoO1xyXG5cclxuICAgICAgICBzZXRNb2JpbGVGdWxsSGVpZ2h0KGJvZHkpO1xyXG5cclxuICAgICAgICBsZXQgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICBpbWFnZS5zcmMgPSBiZ1N0eWxlLnNsaWNlKGluZGV4LCAtbGFzdEl0ZW0ubGVuZ3RoKTtcclxuICAgICAgICBpbWFnZS5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICBsb2FkZWQrKztcclxuICAgICAgICAgIGFuaW1hdGVQcm9ncmVzcyhsb2FkZWQpO1xyXG4gICAgICAgICAgc2hvd1BhZ2UoKTtcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1cclxuICBjaGVja0xvYWRpbmdCZ1ByZWxvYWRlcihsb2FkZXJVcmwpO1xyXG5cclxuICBmdW5jdGlvbiBpc01vYmlsZSgpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChcclxuICAgICAgICBuYXZpZ2F0b3IudXNlckFnZW50XHJcbiAgICAgICkgfHwgJ29udG91Y2hzdGFydCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2V0TW9iaWxlRnVsbEhlaWdodChlbGVtKSB7XHJcbiAgICBlbGVtLnN0eWxlLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodCArICdweCc7XHJcbiAgICBlbGVtLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJztcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGxvYWRTY3JpcHQoc2NyaXB0KSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlcykgPT4ge1xyXG4gICAgICBsZXQgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gICAgICBlbGVtLnNyYyA9IHNjcmlwdDtcclxuICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmQoZWxlbSk7XHJcbiAgICAgIGVsZW0ub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICAgIGxvYWRlZCsrO1xyXG4gICAgICAgIGFuaW1hdGVQcm9ncmVzcyhsb2FkZWQpO1xyXG4gICAgICAgIHJlcygpO1xyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBsb2FkSW1nKHVybCkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXMpID0+IHtcclxuICAgICAgbGV0IGltZyA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICBpbWcuc3JjID0gdXJsO1xyXG4gICAgICBpbWcub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICAgIGxvYWRlZCsrO1xyXG4gICAgICAgIGFuaW1hdGVQcm9ncmVzcyhsb2FkZWQpO1xyXG4gICAgICAgIHJlcygpO1xyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBsZXQgaW50SWQ7XHJcbiAgZnVuY3Rpb24gYW5pbWF0ZVByb2dyZXNzKGNvdW50KSB7XHJcbiAgICBsZXQgZWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzc19fbnVtYmVyJyk7XHJcbiAgICBsZXQgbmV3TnVtYmVyID0gKDEwMCAqIGNvdW50KSAvIG1heExvYWRlZDtcclxuICAgIGNvbnN0IGludGVydmFsID0gMTA7XHJcbiAgICBjb25zdCBzdGVwID0gMTtcclxuICAgIGNvbnN0IHRpbWUgPSBNYXRoLnJvdW5kKGludGVydmFsIC8gbWF4TG9hZGVkKTtcclxuXHJcbiAgICBpZiAoaW50SWQpIHtcclxuICAgICAgY2xlYXJJbnRlcnZhbChpbnRJZCk7XHJcbiAgICB9XHJcbiAgICBpbnRJZCA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgcHJvZ3Jlc3MgKz0gc3RlcDtcclxuICAgICAgaWYgKHByb2dyZXNzID49IG5ld051bWJlcikge1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoaW50SWQpO1xyXG4gICAgICAgIHByb2dyZXNzID0gbmV3TnVtYmVyO1xyXG4gICAgICB9XHJcbiAgICAgIGVsZW0uaW5uZXJIVE1MID0gcHJvZ3Jlc3M7XHJcbiAgICB9LCB0aW1lKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNob3dQYWdlKCkge1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIGNvbnRhaW5lckluZGV4LmNsYXNzTGlzdC5hZGQoJ2NvbnRhaW5lci1pbmRleF92aXNpYmxlJyk7XHJcbiAgICAgIHByZUxvYWRlci5jbGFzc0xpc3QuYWRkKCdwcmVsb2FkZXJfaGlkZWQnKTtcclxuICAgIH0sIDEwMDApO1xyXG4gIH1cclxufSkoKTtcclxuLy8gZmxpcCBmb3JtXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgY29uc3QgYXV0aFdyYXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXV0aC13cmFwJyk7XHJcbiAgY29uc3QgYXV0aExpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXV0aF9fbGluaycpO1xyXG4gIGNvbnN0IGZyb250ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZyb250Jyk7XHJcbiAgY29uc3QgYmFjayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iYWNrJyk7XHJcbiAgY29uc3QgaG9tZUxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dF9fbGlua19ob21lJyk7XHJcblxyXG4gIGF1dGhMaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgZnJvbnQuY2xhc3NMaXN0LmFkZCgnZnJvbnRfZmxpcHBlZCcpO1xyXG4gICAgYmFjay5jbGFzc0xpc3QuYWRkKCdiYWNrX2ZsaXBwZWQnKTtcclxuICAgIGF1dGhXcmFwLmNsYXNzTGlzdC5hZGQoJ2F1dGgtd3JhcF9kaXNwbGF5LW5vbmUnKTtcclxuICB9KTtcclxuICBob21lTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBmcm9udC5jbGFzc0xpc3QucmVtb3ZlKCdmcm9udF9mbGlwcGVkJyk7XHJcbiAgICBiYWNrLmNsYXNzTGlzdC5yZW1vdmUoJ2JhY2tfZmxpcHBlZCcpO1xyXG4gICAgYXV0aFdyYXAuY2xhc3NMaXN0LnJlbW92ZSgnYXV0aC13cmFwX2Rpc3BsYXktbm9uZScpO1xyXG4gIH0pO1xyXG59KSgpO1xyXG4vLyBmb3JtIGF1dGhcclxuKGZ1bmN0aW9uICgpIHtcclxuICBjb25zdCBsb2dpbkxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dF9fbGlua19sb2dpbicpO1xyXG4gIGNvbnN0IGZvcm1OYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fX25hbWUnKTtcclxuICBjb25zdCBmb3JtUGFzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19wYXNzJyk7XHJcbiAgY29uc3QgY2hlY2tib3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hlY2tib3hfX2lucHV0Jyk7XHJcbiAgY29uc3QgcmFkaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmFkaW8tYnRuX19pbnB1dF95ZXMnKTtcclxuICBjb25zdCBtZXNzYWdlQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1lc3NhZ2VCb3gnKTtcclxuICBjb25zdCBtZXNzYWdlQm94VGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZXNzYWdlQm94X190ZXh0Jyk7XHJcbiAgbGV0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybS1hdXRoJyk7XHJcbiAgbGV0IHRpbWVvdXRJZDtcclxuXHJcbiAgbG9naW5MaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBQcm9taXNlLmFsbChbXHJcbiAgICAgIHZhbGlkYXRlRW1haWwoZm9ybU5hbWUudmFsdWUpLFxyXG4gICAgICB2YWxpZGF0ZVBhc3MoZm9ybVBhc3MudmFsdWUpLFxyXG4gICAgICB2YWxpZGF0ZUNoZWNrYm94KGNoZWNrYm94KSxcclxuICAgICAgdmFsaWRhdGVSYWRpbyhyYWRpbyksXHJcbiAgICBdKVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XHJcbiAgICAgICAgbWVzc2FnZUJveC5jbGFzc0xpc3QucmVtb3ZlKCdtZXNzYWdlQm94X3Zpc2libGUnKTtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIG1lc3NhZ2VCb3hUZXh0LmlubmVySFRNTCA9ICfQpNC+0YDQvNCwINC+0YLQv9GA0LDQstC70LXQvdCwJztcclxuICAgICAgICAgIG1lc3NhZ2VCb3guY2xhc3NMaXN0LmFkZCgnbWVzc2FnZUJveF92aXNpYmxlJyk7XHJcbiAgICAgICAgICBmb3JtLnJlc2V0KCk7XHJcbiAgICAgICAgfSwgODAwKTtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIG1lc3NhZ2VCb3guY2xhc3NMaXN0LnJlbW92ZSgnbWVzc2FnZUJveF92aXNpYmxlJyk7XHJcbiAgICAgICAgfSwgMzAwMCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBpZiAoIXRpbWVvdXRJZCkge1xyXG4gICAgICAgICAgbWVzc2FnZUJveFRleHQuaW5uZXJIVE1MID0gZXJyb3I7XHJcbiAgICAgICAgICBtZXNzYWdlQm94LmNsYXNzTGlzdC5hZGQoJ21lc3NhZ2VCb3hfdmlzaWJsZScpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcclxuICAgICAgICAgIG1lc3NhZ2VCb3guY2xhc3NMaXN0LnJlbW92ZSgnbWVzc2FnZUJveF92aXNpYmxlJyk7XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgbWVzc2FnZUJveFRleHQuaW5uZXJIVE1MID0gZXJyb3I7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VCb3guY2xhc3NMaXN0LmFkZCgnbWVzc2FnZUJveF92aXNpYmxlJyk7XHJcbiAgICAgICAgICB9LCA4MDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICBtZXNzYWdlQm94LmNsYXNzTGlzdC5yZW1vdmUoJ21lc3NhZ2VCb3hfdmlzaWJsZScpO1xyXG4gICAgICAgICAgdGltZW91dElkID0gbnVsbDtcclxuICAgICAgICB9LCAzMDAwKTtcclxuICAgICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGZ1bmN0aW9uIHZhbGlkYXRlRW1haWwobWFpbCkge1xyXG4gICAgY29uc3QgcmVnID0gL15cXFMrQFxcUytcXC5cXFMrJC87XHJcbiAgICBsZXQgbWFpbFRyaW0gPSBtYWlsLnRyaW0oKTtcclxuXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlcywgcmVqKSA9PiB7XHJcbiAgICAgIHJldHVybiByZWcudGVzdChtYWlsVHJpbSlcclxuICAgICAgICA/IHJlcyhtYWlsVHJpbSlcclxuICAgICAgICA6IHJlaign0JLQstC10LTQuNGC0LUg0L/RgNCw0LLQuNC70YzQvdGL0Lkg0LDQtNGA0LXRgSDQv9C+0YfRgtGLJyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHZhbGlkYXRlUGFzcyhwYXNzKSB7XHJcbiAgICBjb25zdCBsaW1pdHMgPSBbNCwgMTVdO1xyXG4gICAgbGV0IHBhc3NUcmltID0gcGFzcy50cmltKCk7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xyXG4gICAgICByZXR1cm4gcGFzc1RyaW0ubGVuZ3RoID4gbGltaXRzWzBdICYmIHBhc3NUcmltLmxlbmd0aCA8PSBsaW1pdHNbMV1cclxuICAgICAgICA/IHJlcyhwYXNzVHJpbSlcclxuICAgICAgICA6IHJlaign0JLQstC10LTQuNGC0LUg0L/QsNGA0L7Qu9GMINC00LvQuNC90L7QuSDQvtGCIDQg0LTQviAxNSDRgdC40LzQstC+0LvQvtCyJyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHZhbGlkYXRlQ2hlY2tib3goYm94KSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlcywgcmVqKSA9PiB7XHJcbiAgICAgIHJldHVybiBib3guY2hlY2tlZCA/IHJlcygpIDogcmVqKCfQoNC+0LHQvtGC0LDQvCDQstGF0L7QtCDQstC+0YHQv9GA0LXRidC10L0nKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdmFsaWRhdGVSYWRpbyhidG4pIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHtcclxuICAgICAgcmV0dXJuIGJ0bi5jaGVja2VkID8gcmVzKCkgOiByZWooJ9Cg0L7QsdC+0YLQsNC8INCy0YXQvtC0INCy0L7RgdC/0YDQtdGJ0LXQvScpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59KSgpO1xyXG4iXX0=
