"use strict";!function(){var e,o,r=document.querySelector("body"),i=document.querySelector(".preloader"),s=document.querySelector(".preloader-bg"),c=document.querySelector(".container-index"),t=["./assets/img/content/forest_prel_bg.jpg"],a=["./assets/js/foundation.js"],u=["./assets/img/content/bg_forest_1800.jpg","./assets/img/content/water-maps.jpg"],l=0,d=0,m=!f()&&1200<=window.innerWidth?[].concat(t,a,u).length:t.length+1;function f(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"ontouchstart"in document.documentElement}function p(e){var t=document.querySelector(".progress__number"),n=100*e/m,e=Math.round(10/m);o&&clearInterval(o),o=setInterval(function(){n<=(l+=1)&&(clearInterval(o),l=n),t.innerHTML=l},e)}function _(){var e,t,n;location.toString().includes("auth")&&(e=document.querySelector(".auth-wrap"),t=document.querySelector(".front"),n=document.querySelector(".back"),t.classList.add("front_flipped"),n.classList.add("back_flipped"),e.classList.add("auth-wrap_display-none")),setTimeout(function(){c.classList.add("container-index_visible"),i.classList.add("preloader_hided")},1e3)}t=t,(e=new Image).src=t[0],e.onload=function(){var e,t,n;p(++d),s.classList.add("preloader-bg_visible"),!f()&&1200<=window.innerWidth?Promise.all(a.map(function(e){return n=e,new Promise(function(e){var t=document.createElement("script");t.src=n,document.head.append(t),t.onload=function(){p(++d),e()}});var n})).then(function(){return Promise.all(u.map(function(e){return n=e,new Promise(function(e){var t=new Image;t.src=n,t.onload=function(){p(++d),e()}});var n}))}).then(function(){d===m&&(c.classList.remove("bg-forest-index"),_())}):(e=document.querySelector(".bg-forest-index"),t='url("',t=(e=window.getComputedStyle(e).backgroundImage).indexOf(t)+t.length,(n=r).style.height=window.innerHeight+"px",n.style.position="fixed",(n=new Image).src=e.slice(t,-'")'.length),n.onload=function(){p(++d),_()})}}(),function(){var t=document.querySelector(".auth-wrap"),e=document.querySelector(".auth__link"),n=document.querySelector(".front"),o=document.querySelector(".back"),r=document.querySelector(".butt__link_home");e.addEventListener("click",function(){n.classList.add("front_flipped"),o.classList.add("back_flipped"),t.classList.add("auth-wrap_display-none")}),r.addEventListener("click",function(e){e.preventDefault(),n.classList.remove("front_flipped"),o.classList.remove("back_flipped"),t.classList.remove("auth-wrap_display-none")})}(),function(){var t,e=document.querySelector(".butt__link_login"),a=document.querySelector(".form__name"),u=document.querySelector(".form__pass"),l=document.querySelector(".checkbox__input"),d=document.querySelector(".radio-btn__input_yes"),m=document.querySelector(".messageBox"),f=document.querySelector(".messageBox__text"),p=document.querySelector(".form-auth");e.addEventListener("click",function(e){var n,o,r,i,s,c;e.preventDefault(),Promise.all([(e=a.value,s=/^\S+@\S+\.\S+$/,c=e.trim(),new Promise(function(e,t){return s.test(c)?e(c):t("Введите правильный адрес почты")})),(e=u.value,r=[4,15],i=e.trim(),new Promise(function(e,t){return i.length>r[0]&&i.length<=r[1]?e(i):t("Введите пароль длиной от 4 до 15 символов")})),(o=l,new Promise(function(e,t){return o.checked?e():t("Роботам вход воспрещен")})),(n=d,new Promise(function(e,t){return n.checked?e():t("Роботам вход воспрещен")}))]).then(function(){clearTimeout(t),m.classList.remove("messageBox_visible"),setTimeout(function(){f.innerHTML="Форма отправлена",m.classList.add("messageBox_visible"),p.reset()},800),setTimeout(function(){m.classList.remove("messageBox_visible")},3e3)}).catch(function(e){t?(clearTimeout(t),m.classList.remove("messageBox_visible"),setTimeout(function(){f.innerHTML=e,m.classList.add("messageBox_visible")},800)):(f.innerHTML=e,m.classList.add("messageBox_visible")),t=setTimeout(function(){m.classList.remove("messageBox_visible"),t=null},3e3)})})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiaW1hZ2UiLCJpbnRJZCIsImJvZHkiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwcmVMb2FkZXIiLCJwcmVMb2FkZXJCZyIsImxvYWRlclVybCIsInNjcmlwdFVybCIsInBhZ2VJbWdVcmxzIiwicHJvZ3Jlc3MiLCJjaGVja0xvYWRpbmdCZ1ByZWxvYWRlciIsImxvYWRlZCIsImlzTW9iaWxlIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImFuaW1hdGVQcm9ncmVzcyIsImxlbmd0aCIsImNsYXNzTGlzdCIsImVsZW0iLCJ0ZXN0IiwidXNlckFnZW50IiwiZG9jdW1lbnRFbGVtZW50IiwiY291bnQiLCJvcGVuQXV0aFBhZ2UiLCJhdXRoV3JhcCIsImFkZCIsIm1heExvYWRlZCIsImNsZWFySW50ZXJ2YWwiLCJsb2NhdGlvbiIsInRvU3RyaW5nIiwic2V0VGltZW91dCIsIm5ld051bWJlciIsImlubmVySFRNTCIsInRpbWUiLCJwcmV2ZW50RGVmYXVsdCIsImZyb250IiwiaG9tZUxpbmsiLCJyZW1vdmUiLCJpbmNsdWRlcyIsImJhY2siLCJ1cmwiLCJzY3JpcHQiLCJsb2FkU2NyaXB0Iiwic3JjIiwib25sb2FkIiwiUHJvbWlzZSIsImNvbnRhaW5lckluZGV4Iiwic2hvd1BhZ2UiLCJtYXAiLCJyZXMiLCJjcmVhdGVFbGVtZW50IiwiaGVhZCIsImFwcGVuZCIsInRoZW4iLCJhbGwiLCJNYXRoIiwicm91bmQiLCJJbWFnZSIsImltZyIsImZpcnN0SXRlbSIsInNldE1vYmlsZUZ1bGxIZWlnaHQiLCJnZXRDb21wdXRlZFN0eWxlIiwiYmciLCJiYWNrZ3JvdW5kSW1hZ2UiLCJzdHlsZSIsImhlaWdodCIsImlubmVySGVpZ2h0IiwibG9hZEltZyIsImJnU3R5bGUiLCJzbGljZSIsImluZGV4IiwiZm9ybVBhc3MiLCJjaGVja2JveCIsInJhZGlvIiwibWVzc2FnZUJveCIsIm1lc3NhZ2VCb3hUZXh0IiwiYXV0aExpbmsiLCJ0aW1lb3V0SWQiLCJsb2dpbkxpbmsiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInZhbGlkYXRlRW1haWwiLCJ2YWxpZGF0ZVBhc3MiLCJyZXNldCIsImVycm9yIiwiZm9ybU5hbWUiLCJjbGVhclRpbWVvdXQiLCJmb3JtIiwiYnRuIiwiYm94IiwibGltaXRzIiwicGFzc1RyaW0iLCJyZWciLCJtYWlsVHJpbSIsIm1haWwiLCJ2YWx1ZSIsInRyaW0iLCJyZWoiLCJwYXNzIiwiY2hlY2tlZCIsInZhbGlkYXRlQ2hlY2tib3giLCJ2YWxpZGF0ZVJhZGlvIl0sIm1hcHBpbmdzIjoiQUFBQSxhQUNBLENBQUEsV0FDQyxJQXNCT0EsRUE4RkhDLEVBcEhKQyxFQUFZQyxTQUFBQyxjQUFBLE1BQUEsRUFDTEYsRUFBT0MsU0FBU0MsY0FBcUIsWUFBQSxFQUNyQ0MsRUFBWUYsU0FBU0MsY0FBYyxlQUFhLEVBQ2hERSxFQUFjSCxTQUFTQyxjQUFjLGtCQUFnQixFQUdyREcsRUFBYSxDQUFBLDJDQUNiQyxFQUFhLENBQUEsNkJBQ2JDLEVBQ0osQ0FJRiwwQ0FDQSx1Q0FPQUMsRUFBU0MsRUFDUEMsRUFBUyxFQUVUWixFQVBBLENBQUNhLEVBUU8sR0FBRSxNQUFBQyxPQUFBQyxXQUNSQyxHQUFBQSxPQUFBQSxFQUFnQkosRUFBT0gsQ0FBQSxFQUFBUSxPQUN2QlgsRUFBWVksT0FKQyxFQXFDakIsU0FlUUMsSUFkTixNQWdCRWhCLGlFQUEwQmlCLEtBQzFCRCxVQUFXRSxTQUFHLEdBQ1pULGlCQUFRVCxTQUFBbUIsZUFiZCxDQW1EQSxTQUFBTixFQUFBTyxHQUVBLElBQUFKLEVBQVNLLFNBQVlwQixjQUFFLG1CQUFBLEVBQ2ZxQixFQUFXdEIsSUFBUW9CLEVBQUNuQixFQUlwQmMsRUFBQUEsS0FBVVEsTUFIRnZCLEdBR3FCd0IsQ0FBQyxFQUVwQ0YsR0FDRkcsY0FBQTNCLENBQUEsRUFHRUEsRUFBRzRCLFlBQVNDLFdBRUtaLElBRGpCYSxHQVRhNUIsS0FXWEUsY0FBVWEsQ0FBVVEsRUFDbkJoQixFQUFLc0IsR0FFUmIs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IHByZWxvYWRlclxyXG4oZnVuY3Rpb24gKCkge1xyXG4gIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XHJcbiAgY29uc3QgcHJlTG9hZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByZWxvYWRlcicpO1xyXG4gIGNvbnN0IHByZUxvYWRlckJnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByZWxvYWRlci1iZycpO1xyXG4gIGNvbnN0IGNvbnRhaW5lckluZGV4ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhaW5lci1pbmRleCcpO1xyXG5cclxuICBjb25zdCBsb2FkZXJVcmwgPSBbJy4vYXNzZXRzL2ltZy9jb250ZW50L2ZvcmVzdF9wcmVsX2JnLmpwZyddO1xyXG4gIGNvbnN0IHNjcmlwdFVybCA9IFsnLi9hc3NldHMvanMvZm91bmRhdGlvbi5qcyddO1xyXG4gIGNvbnN0IHBhZ2VJbWdVcmxzID0gW1xyXG4gICAgJy4vYXNzZXRzL2ltZy9jb250ZW50L2JnX2ZvcmVzdF8xODAwLmpwZycsXHJcbiAgICAnLi9hc3NldHMvaW1nL2NvbnRlbnQvd2F0ZXItbWFwcy5qcGcnLFxyXG4gIF07XHJcblxyXG4gIGxldCBwcm9ncmVzcyA9IDA7XHJcbiAgbGV0IGxvYWRlZCA9IDA7XHJcbiAgbGV0IGltZ0Zyb21Dc3MgPSAxO1xyXG4gIGxldCBtYXhMb2FkZWQgPVxyXG4gICAgIWlzTW9iaWxlKCkgJiYgd2luZG93LmlubmVyV2lkdGggPj0gMTIwMFxyXG4gICAgICA/IFsuLi5sb2FkZXJVcmwsIC4uLnNjcmlwdFVybCwgLi4ucGFnZUltZ1VybHNdLmxlbmd0aFxyXG4gICAgICA6IGxvYWRlclVybC5sZW5ndGggKyBpbWdGcm9tQ3NzO1xyXG5cclxuICBmdW5jdGlvbiBjaGVja0xvYWRpbmdCZ1ByZWxvYWRlcih1cmwpIHtcclxuICAgIGxldCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgaW1hZ2Uuc3JjID0gdXJsWzBdO1xyXG4gICAgaW1hZ2Uub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICBsb2FkZWQrKztcclxuICAgICAgYW5pbWF0ZVByb2dyZXNzKGxvYWRlZCk7XHJcbiAgICAgIHByZUxvYWRlckJnLmNsYXNzTGlzdC5hZGQoJ3ByZWxvYWRlci1iZ192aXNpYmxlJyk7XHJcblxyXG4gICAgICBpZiAoIWlzTW9iaWxlKCkgJiYgd2luZG93LmlubmVyV2lkdGggPj0gMTIwMCkge1xyXG4gICAgICAgIFByb21pc2UuYWxsKHNjcmlwdFVybC5tYXAoKHVybCkgPT4gbG9hZFNjcmlwdCh1cmwpKSlcclxuICAgICAgICAgIC50aGVuKCgpID0+IFByb21pc2UuYWxsKHBhZ2VJbWdVcmxzLm1hcCgodXJsKSA9PiBsb2FkSW1nKHVybCkpKSlcclxuICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGxvYWRlZCA9PT0gbWF4TG9hZGVkKSB7XHJcbiAgICAgICAgICAgICAgY29udGFpbmVySW5kZXguY2xhc3NMaXN0LnJlbW92ZSgnYmctZm9yZXN0LWluZGV4Jyk7XHJcbiAgICAgICAgICAgICAgc2hvd1BhZ2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbGV0IGJnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJnLWZvcmVzdC1pbmRleCcpO1xyXG4gICAgICAgIGNvbnN0IGZpcnN0SXRlbSA9ICd1cmwoXCInO1xyXG4gICAgICAgIGNvbnN0IGxhc3RJdGVtID0gJ1wiKSc7XHJcblxyXG4gICAgICAgIGxldCBiZ1N0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoYmcpLmJhY2tncm91bmRJbWFnZTtcclxuICAgICAgICBsZXQgaW5kZXggPSBiZ1N0eWxlLmluZGV4T2YoZmlyc3RJdGVtKSArIGZpcnN0SXRlbS5sZW5ndGg7XHJcblxyXG4gICAgICAgIHNldE1vYmlsZUZ1bGxIZWlnaHQoYm9keSk7XHJcblxyXG4gICAgICAgIGxldCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgIGltYWdlLnNyYyA9IGJnU3R5bGUuc2xpY2UoaW5kZXgsIC1sYXN0SXRlbS5sZW5ndGgpO1xyXG4gICAgICAgIGltYWdlLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICAgIGxvYWRlZCsrO1xyXG4gICAgICAgICAgYW5pbWF0ZVByb2dyZXNzKGxvYWRlZCk7XHJcbiAgICAgICAgICBzaG93UGFnZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG4gIGNoZWNrTG9hZGluZ0JnUHJlbG9hZGVyKGxvYWRlclVybCk7XHJcblxyXG4gIGZ1bmN0aW9uIGlzTW9iaWxlKCkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KFxyXG4gICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnRcclxuICAgICAgKSB8fCAnb250b3VjaHN0YXJ0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZXRNb2JpbGVGdWxsSGVpZ2h0KGVsZW0pIHtcclxuICAgIGVsZW0uc3R5bGUuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0ICsgJ3B4JztcclxuICAgIGVsZW0uc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gbG9hZFNjcmlwdChzY3JpcHQpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzKSA9PiB7XHJcbiAgICAgIGxldCBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICAgIGVsZW0uc3JjID0gc2NyaXB0O1xyXG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZChlbGVtKTtcclxuICAgICAgZWxlbS5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICAgICAgbG9hZGVkKys7XHJcbiAgICAgICAgYW5pbWF0ZVByb2dyZXNzKGxvYWRlZCk7XHJcbiAgICAgICAgcmVzKCk7XHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGxvYWRJbWcodXJsKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlcykgPT4ge1xyXG4gICAgICBsZXQgaW1nID0gbmV3IEltYWdlKCk7XHJcbiAgICAgIGltZy5zcmMgPSB1cmw7XHJcbiAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICAgICAgbG9hZGVkKys7XHJcbiAgICAgICAgYW5pbWF0ZVByb2dyZXNzKGxvYWRlZCk7XHJcbiAgICAgICAgcmVzKCk7XHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGxldCBpbnRJZDtcclxuICBmdW5jdGlvbiBhbmltYXRlUHJvZ3Jlc3MoY291bnQpIHtcclxuICAgIGxldCBlbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2dyZXNzX19udW1iZXInKTtcclxuICAgIGxldCBuZXdOdW1iZXIgPSAoMTAwICogY291bnQpIC8gbWF4TG9hZGVkO1xyXG4gICAgY29uc3QgaW50ZXJ2YWwgPSAxMDtcclxuICAgIGNvbnN0IHN0ZXAgPSAxO1xyXG4gICAgY29uc3QgdGltZSA9IE1hdGgucm91bmQoaW50ZXJ2YWwgLyBtYXhMb2FkZWQpO1xyXG5cclxuICAgIGlmIChpbnRJZCkge1xyXG4gICAgICBjbGVhckludGVydmFsKGludElkKTtcclxuICAgIH1cclxuICAgIGludElkID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICBwcm9ncmVzcyArPSBzdGVwO1xyXG4gICAgICBpZiAocHJvZ3Jlc3MgPj0gbmV3TnVtYmVyKSB7XHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRJZCk7XHJcbiAgICAgICAgcHJvZ3Jlc3MgPSBuZXdOdW1iZXI7XHJcbiAgICAgIH1cclxuICAgICAgZWxlbS5pbm5lckhUTUwgPSBwcm9ncmVzcztcclxuICAgIH0sIHRpbWUpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gb3BlbkF1dGhQYWdlKCl7XHJcbiAgICBjb25zdCBhdXRoV3JhcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hdXRoLXdyYXAnKTtcclxuICAgIGNvbnN0IGZyb250ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZyb250Jyk7XHJcbiAgICBjb25zdCBiYWNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJhY2snKTtcclxuXHJcbiAgICBmcm9udC5jbGFzc0xpc3QuYWRkKCdmcm9udF9mbGlwcGVkJyk7XHJcbiAgICBiYWNrLmNsYXNzTGlzdC5hZGQoJ2JhY2tfZmxpcHBlZCcpO1xyXG4gICAgYXV0aFdyYXAuY2xhc3NMaXN0LmFkZCgnYXV0aC13cmFwX2Rpc3BsYXktbm9uZScpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2hvd1BhZ2UoKSB7XHJcbiAgICBpZihsb2NhdGlvbi50b1N0cmluZygpLmluY2x1ZGVzKCdhdXRoJykpIG9wZW5BdXRoUGFnZSgpO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIGNvbnRhaW5lckluZGV4LmNsYXNzTGlzdC5hZGQoJ2NvbnRhaW5lci1pbmRleF92aXNpYmxlJyk7XHJcbiAgICAgIHByZUxvYWRlci5jbGFzc0xpc3QuYWRkKCdwcmVsb2FkZXJfaGlkZWQnKTtcclxuICAgIH0sIDEwMDApO1xyXG4gIH1cclxufSkoKTtcclxuLy8gZmxpcCBmb3JtXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgY29uc3QgYXV0aFdyYXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXV0aC13cmFwJyk7XHJcbiAgY29uc3QgYXV0aExpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXV0aF9fbGluaycpO1xyXG4gIGNvbnN0IGZyb250ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZyb250Jyk7XHJcbiAgY29uc3QgYmFjayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iYWNrJyk7XHJcbiAgY29uc3QgaG9tZUxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dF9fbGlua19ob21lJyk7XHJcblxyXG4gIGF1dGhMaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgZnJvbnQuY2xhc3NMaXN0LmFkZCgnZnJvbnRfZmxpcHBlZCcpO1xyXG4gICAgYmFjay5jbGFzc0xpc3QuYWRkKCdiYWNrX2ZsaXBwZWQnKTtcclxuICAgIGF1dGhXcmFwLmNsYXNzTGlzdC5hZGQoJ2F1dGgtd3JhcF9kaXNwbGF5LW5vbmUnKTtcclxuICB9KTtcclxuICBob21lTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBmcm9udC5jbGFzc0xpc3QucmVtb3ZlKCdmcm9udF9mbGlwcGVkJyk7XHJcbiAgICBiYWNrLmNsYXNzTGlzdC5yZW1vdmUoJ2JhY2tfZmxpcHBlZCcpO1xyXG4gICAgYXV0aFdyYXAuY2xhc3NMaXN0LnJlbW92ZSgnYXV0aC13cmFwX2Rpc3BsYXktbm9uZScpO1xyXG4gIH0pO1xyXG59KSgpO1xyXG4vLyBmb3JtIGF1dGhcclxuKGZ1bmN0aW9uICgpIHtcclxuICBjb25zdCBsb2dpbkxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dF9fbGlua19sb2dpbicpO1xyXG4gIGNvbnN0IGZvcm1OYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fX25hbWUnKTtcclxuICBjb25zdCBmb3JtUGFzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19wYXNzJyk7XHJcbiAgY29uc3QgY2hlY2tib3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hlY2tib3hfX2lucHV0Jyk7XHJcbiAgY29uc3QgcmFkaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmFkaW8tYnRuX19pbnB1dF95ZXMnKTtcclxuICBjb25zdCBtZXNzYWdlQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1lc3NhZ2VCb3gnKTtcclxuICBjb25zdCBtZXNzYWdlQm94VGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZXNzYWdlQm94X190ZXh0Jyk7XHJcbiAgbGV0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybS1hdXRoJyk7XHJcbiAgbGV0IHRpbWVvdXRJZDtcclxuXHJcbiAgbG9naW5MaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBQcm9taXNlLmFsbChbXHJcbiAgICAgIHZhbGlkYXRlRW1haWwoZm9ybU5hbWUudmFsdWUpLFxyXG4gICAgICB2YWxpZGF0ZVBhc3MoZm9ybVBhc3MudmFsdWUpLFxyXG4gICAgICB2YWxpZGF0ZUNoZWNrYm94KGNoZWNrYm94KSxcclxuICAgICAgdmFsaWRhdGVSYWRpbyhyYWRpbyksXHJcbiAgICBdKVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XHJcbiAgICAgICAgbWVzc2FnZUJveC5jbGFzc0xpc3QucmVtb3ZlKCdtZXNzYWdlQm94X3Zpc2libGUnKTtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIG1lc3NhZ2VCb3hUZXh0LmlubmVySFRNTCA9ICfQpNC+0YDQvNCwINC+0YLQv9GA0LDQstC70LXQvdCwJztcclxuICAgICAgICAgIG1lc3NhZ2VCb3guY2xhc3NMaXN0LmFkZCgnbWVzc2FnZUJveF92aXNpYmxlJyk7XHJcbiAgICAgICAgICBmb3JtLnJlc2V0KCk7XHJcbiAgICAgICAgfSwgODAwKTtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIG1lc3NhZ2VCb3guY2xhc3NMaXN0LnJlbW92ZSgnbWVzc2FnZUJveF92aXNpYmxlJyk7XHJcbiAgICAgICAgfSwgMzAwMCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBpZiAoIXRpbWVvdXRJZCkge1xyXG4gICAgICAgICAgbWVzc2FnZUJveFRleHQuaW5uZXJIVE1MID0gZXJyb3I7XHJcbiAgICAgICAgICBtZXNzYWdlQm94LmNsYXNzTGlzdC5hZGQoJ21lc3NhZ2VCb3hfdmlzaWJsZScpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcclxuICAgICAgICAgIG1lc3NhZ2VCb3guY2xhc3NMaXN0LnJlbW92ZSgnbWVzc2FnZUJveF92aXNpYmxlJyk7XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgbWVzc2FnZUJveFRleHQuaW5uZXJIVE1MID0gZXJyb3I7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VCb3guY2xhc3NMaXN0LmFkZCgnbWVzc2FnZUJveF92aXNpYmxlJyk7XHJcbiAgICAgICAgICB9LCA4MDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICBtZXNzYWdlQm94LmNsYXNzTGlzdC5yZW1vdmUoJ21lc3NhZ2VCb3hfdmlzaWJsZScpO1xyXG4gICAgICAgICAgdGltZW91dElkID0gbnVsbDtcclxuICAgICAgICB9LCAzMDAwKTtcclxuICAgICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGZ1bmN0aW9uIHZhbGlkYXRlRW1haWwobWFpbCkge1xyXG4gICAgY29uc3QgcmVnID0gL15cXFMrQFxcUytcXC5cXFMrJC87XHJcbiAgICBsZXQgbWFpbFRyaW0gPSBtYWlsLnRyaW0oKTtcclxuXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlcywgcmVqKSA9PiB7XHJcbiAgICAgIHJldHVybiByZWcudGVzdChtYWlsVHJpbSlcclxuICAgICAgICA/IHJlcyhtYWlsVHJpbSlcclxuICAgICAgICA6IHJlaign0JLQstC10LTQuNGC0LUg0L/RgNCw0LLQuNC70YzQvdGL0Lkg0LDQtNGA0LXRgSDQv9C+0YfRgtGLJyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHZhbGlkYXRlUGFzcyhwYXNzKSB7XHJcbiAgICBjb25zdCBsaW1pdHMgPSBbNCwgMTVdO1xyXG4gICAgbGV0IHBhc3NUcmltID0gcGFzcy50cmltKCk7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xyXG4gICAgICByZXR1cm4gcGFzc1RyaW0ubGVuZ3RoID4gbGltaXRzWzBdICYmIHBhc3NUcmltLmxlbmd0aCA8PSBsaW1pdHNbMV1cclxuICAgICAgICA/IHJlcyhwYXNzVHJpbSlcclxuICAgICAgICA6IHJlaign0JLQstC10LTQuNGC0LUg0L/QsNGA0L7Qu9GMINC00LvQuNC90L7QuSDQvtGCIDQg0LTQviAxNSDRgdC40LzQstC+0LvQvtCyJyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHZhbGlkYXRlQ2hlY2tib3goYm94KSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlcywgcmVqKSA9PiB7XHJcbiAgICAgIHJldHVybiBib3guY2hlY2tlZCA/IHJlcygpIDogcmVqKCfQoNC+0LHQvtGC0LDQvCDQstGF0L7QtCDQstC+0YHQv9GA0LXRidC10L0nKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdmFsaWRhdGVSYWRpbyhidG4pIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHtcclxuICAgICAgcmV0dXJuIGJ0bi5jaGVja2VkID8gcmVzKCkgOiByZWooJ9Cg0L7QsdC+0YLQsNC8INCy0YXQvtC0INCy0L7RgdC/0YDQtdGJ0LXQvScpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59KSgpO1xyXG4iXX0=
